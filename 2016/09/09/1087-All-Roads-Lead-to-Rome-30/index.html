<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>1087. All Roads Lead to Rome (30) | luchujie&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Indeed there are many different tourist routes from our city to Rome. You are supposed to find your clients the route with the least cost while gaining the most happiness.">
<meta property="og:type" content="article">
<meta property="og:title" content="1087. All Roads Lead to Rome (30)">
<meta property="og:url" content="http://yoursite.com/2016/09/09/1087-All-Roads-Lead-to-Rome-30/index.html">
<meta property="og:site_name" content="luchujie's Blog">
<meta property="og:description" content="Indeed there are many different tourist routes from our city to Rome. You are supposed to find your clients the route with the least cost while gaining the most happiness.">
<meta property="og:updated_time" content="2016-09-09T15:21:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="1087. All Roads Lead to Rome (30)">
<meta name="twitter:description" content="Indeed there are many different tourist routes from our city to Rome. You are supposed to find your clients the route with the least cost while gaining the most happiness.">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">luchujie</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/newlcj93" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/1731585780/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BFS/" style="font-size: 15px;">BFS</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/DFS/" style="font-size: 10px;">DFS</a> <a href="/tags/PAT/" style="font-size: 20px;">PAT</a> <a href="/tags/PAT甲级/" style="font-size: 12.5px;">PAT甲级</a> <a href="/tags/Queue/" style="font-size: 10px;">Queue</a> <a href="/tags/STL/" style="font-size: 15px;">STL</a> <a href="/tags/Tree/" style="font-size: 12.5px;">Tree</a> <a href="/tags/Trees/" style="font-size: 10px;">Trees</a> <a href="/tags/UVa/" style="font-size: 17.5px;">UVa</a> <a href="/tags/map/" style="font-size: 10px;">map</a> <a href="/tags/priority-queue/" style="font-size: 10px;">priority queue</a> <a href="/tags/stack/" style="font-size: 10px;">stack</a> <a href="/tags/内存池/" style="font-size: 10px;">内存池</a> <a href="/tags/动态规划/" style="font-size: 10px;">动态规划</a> <a href="/tags/回文串/" style="font-size: 10px;">回文串</a> <a href="/tags/图/" style="font-size: 10px;">图</a> <a href="/tags/心情/" style="font-size: 10px;">心情</a> <a href="/tags/贪心算法/" style="font-size: 10px;">贪心算法</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">luchujie</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/avatar.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">luchujie</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/newlcj93" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/1731585780/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-1087-All-Roads-Lead-to-Rome-30" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/09/09/1087-All-Roads-Lead-to-Rome-30/" class="article-date">
  	<time datetime="2016-09-09T15:20:36.000Z" itemprop="datePublished">2016-09-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      1087. All Roads Lead to Rome (30)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PAT/">PAT</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Indeed there are many different tourist routes from our city to Rome. You are supposed to find your clients the route with the least cost while gaining the most happiness.<br><a id="more"></a><br>Input Specification:</p>
<p>Each input file contains one test case. For each case, the first line contains 2 positive integers N (2&lt;=N&lt;=200), the number of cities, and K, the total number of routes between pairs of cities; followed by the name of the starting city. The next N-1 lines each gives the name of a city and an integer that represents the happiness one can gain from that city, except the starting city. Then K lines follow, each describes a route between two cities in the format &#x201C;City1 City2 Cost&#x201D;. Here the name of a city is a string of 3 capital English letters, and the destination is always ROM which represents Rome.</p>
<p>Output Specification:</p>
<p>For each test case, we are supposed to find the route with the least cost. If such a route is not unique, the one with the maximum happiness will be recommended. If such a route is still not unique, then we output the one with the maximum average happiness &#x2013; it is guaranteed by the judge that such a solution exists and is unique.</p>
<p>Hence in the first line of output, you must print 4 numbers: the number of different routes with the least cost, the cost, the happiness, and the average happiness (take the integer part only) of the recommended route. Then in the next line, you are supposed to print the route in the format &#x201C;City1-&gt;City2-&gt;&#x2026;-&gt;ROM&#x201D;.</p>
<p>Sample Input:<br>6 7 HZH<br>ROM 100<br>PKN 40<br>GDN 55<br>PRS 95<br>BLN 80<br>ROM GDN 1<br>BLN ROM 1<br>HZH PKN 1<br>PRS ROM 2<br>BLN HZH 2<br>PKN GDN 1<br>HZH PRS 1<br>Sample Output:<br>3 3 195 97<br>HZH-&gt;PRS-&gt;ROM</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;stack&gt;</span><br><span class="line">#include &lt;set&gt;</span><br><span class="line">#include &lt;map&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">map&lt;string, int&gt;city;</span><br><span class="line">map&lt;int,string&gt;rcity;</span><br><span class="line">map&lt;int,vector&lt;pair&lt;int, int&gt;&gt;&gt;edge;</span><br><span class="line">int dis[205],path[205],happ_cnt[205],happ[205],fstep[205],f[205];</span><br><span class="line">bool vis[205];</span><br><span class="line"></span><br><span class="line">int main(int argc, const char * argv[]) {</span><br><span class="line">    //freopen(&quot;/Users/jy/input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">    int n,k,i,d,s;</span><br><span class="line">    string st,u,v;</span><br><span class="line">    scanf(&quot;%d %d&quot;,&amp;n,&amp;k);</span><br><span class="line">    memset(dis, -1, sizeof(dis));</span><br><span class="line">    memset(happ_cnt, -1, sizeof(happ_cnt));</span><br><span class="line">    memset(vis,false, sizeof(vis));</span><br><span class="line">    memset(path,0, sizeof(path));</span><br><span class="line">    memset(fstep, 0, sizeof(fstep));</span><br><span class="line">    cin&gt;&gt;st;</span><br><span class="line">    city[st]=0;</span><br><span class="line">    rcity[0]=st;</span><br><span class="line">    happ[0]=0;</span><br><span class="line">    happ_cnt[0]=0;</span><br><span class="line">    fstep[0]=0;</span><br><span class="line">    path[0]=1;</span><br><span class="line">    dis[0]=0;</span><br><span class="line">    f[0]=0;</span><br><span class="line">    for(i=1;i&lt;n;i++){</span><br><span class="line">        f[i]=i;</span><br><span class="line">        cin&gt;&gt;u;</span><br><span class="line">        city[u]=i;</span><br><span class="line">        rcity[i]=u;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;happ[i]);</span><br><span class="line">    }</span><br><span class="line">    for(i=0;i&lt;k;i++){</span><br><span class="line">        cin&gt;&gt;u&gt;&gt;v;</span><br><span class="line">        scanf(&quot;%d&quot;,&amp;d);</span><br><span class="line">        edge[city[u]].push_back(make_pair(city[v], d));</span><br><span class="line">        edge[city[v]].push_back(make_pair(city[u], d));</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">    s=0;</span><br><span class="line">    vector&lt;pair&lt;int,int&gt;&gt;::iterator it;</span><br><span class="line">    int next;</span><br><span class="line">    while(s!=city[&quot;ROM&quot;]){</span><br><span class="line">        vis[s]=true;</span><br><span class="line">        for(it=edge[s].begin();it!=edge[s].end();it++){</span><br><span class="line">            next=it-&gt;first;</span><br><span class="line">            if(dis[next]==-1||dis[next]&gt;dis[s]+it-&gt;second){</span><br><span class="line">                dis[next]=dis[s]+it-&gt;second;</span><br><span class="line">                happ_cnt[next]=happ_cnt[s]+happ[next];</span><br><span class="line">                path[next]=path[s];</span><br><span class="line">                fstep[next]=fstep[s]+1;</span><br><span class="line">                f[next]=s;</span><br><span class="line">            }</span><br><span class="line">            else{</span><br><span class="line">                if(dis[next]==dis[s]+it-&gt;second){</span><br><span class="line">                    path[next]+=path[s];</span><br><span class="line">                    if(happ_cnt[next]&lt;happ_cnt[s]+happ[next]){</span><br><span class="line">                        happ_cnt[next]=happ_cnt[s]+happ[next];</span><br><span class="line">                        fstep[next]=fstep[s]+1;</span><br><span class="line">                        f[next]=s;</span><br><span class="line">                    }</span><br><span class="line">                    else{</span><br><span class="line">                        if(happ_cnt[next]==happ_cnt[s]+happ[next]){</span><br><span class="line">                            if( fstep[next]&gt;fstep[s]+1){</span><br><span class="line">                                fstep[next]=fstep[s]+1;</span><br><span class="line">                                f[next]=s;</span><br><span class="line">                            }</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        int mindis=-1,minnum;</span><br><span class="line">        for(i =1;i&lt;n;i++){</span><br><span class="line">            if(dis[i]==-1){</span><br><span class="line">                continue;</span><br><span class="line">            }</span><br><span class="line">            if(!vis[i]&amp;&amp;(mindis==-1||mindis&gt;dis[i])){</span><br><span class="line">                mindis=dis[i];</span><br><span class="line">                minnum=i;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        s=minnum;</span><br><span class="line">    }</span><br><span class="line">    printf(&quot;%d %d %d %d\n&quot;,path[s],dis[s],happ_cnt[s],happ_cnt[s]/fstep[s]);</span><br><span class="line">    int p=s;</span><br><span class="line">    stack&lt;int&gt;ss;</span><br><span class="line">    while(p){</span><br><span class="line">        ss.push(p);</span><br><span class="line">        p=f[p];</span><br><span class="line">    }</span><br><span class="line">    cout&lt;&lt;rcity[p];</span><br><span class="line">    while(!ss.empty()){</span><br><span class="line">        cout&lt;&lt;&quot;-&gt;&quot;&lt;&lt;rcity[ss.top()];</span><br><span class="line">        ss.pop();</span><br><span class="line">    }</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    return 0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/09/09/1044-Shopping-in-Mars-25/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          1044. Shopping in Mars (25)
        
      </div>
    </a>
  
  
    <a href="/2016/09/09/1072-Gas-Station-30/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">1072. Gas Station (30)</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="1087-All-Roads-Lead-to-Rome-30" data-title="1087. All Roads Lead to Rome (30)" data-url="http://yoursite.com/2016/09/09/1087-All-Roads-Lead-to-Rome-30/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
        <div class="footer-left">
            &copy; 2016 luchujie
        </div>
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
              本站访客数<span id="busuanzi_value_site_uv"></span>人次
              本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        <div class="footer-right">
            <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
        </div>
    </div>
  </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="���ض���"><img src="/img/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>

  </div>
</body>
</html>